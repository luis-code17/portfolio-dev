---
// Importa los componentes necesarios
import Projects2 from './Projects2.astro';
import ProjectsJava from './projectsJava.astro';
import Projects1 from './Projects1.astro';
import Java from './icons/Java.astro';
---

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const projectSelect = document.getElementById('projectSelect');

    if (projectSelect) {
      projectSelect.addEventListener('change', (e) => {
        const value = (e.target as HTMLSelectElement).value;

        // Seleccionamos todos los proyectos
        const projects1 = document.querySelector('.projects1');
        const projects2 = document.querySelector('.projects2');
        const projectsJava = document.querySelector('.projectsJava');

        // Ocultar todos los proyectos inicialmente con animación
        if (projects1) {
          projects1.classList.add('opacity-0', 'invisible', 'fixed');
          projects1.classList.remove('opacity-100', 'relative');
        }
        if (projects2) {
          projects2.classList.add('opacity-0', 'invisible', 'fixed');
          projects2.classList.remove('opacity-100', 'relative');
        }
        if (projectsJava) {
          projectsJava.classList.add('opacity-0', 'invisible', 'fixed');
          projectsJava.classList.remove('opacity-100', 'relative');
        }

        // Mostrar el proyecto seleccionado con animación
        if (value === '1' && projects1) {
          projects1.classList.remove('invisible', 'fixed', 'opacity-0');
          projects1.classList.add('opacity-100', 'relative');
        } else if (value === '2' && projects2) {
          projects2.classList.remove('invisible', 'fixed', 'opacity-0');
          projects2.classList.add('opacity-100', 'relative');
        } else if (value === 'java' && projectsJava) {
          projectsJava.classList.remove('invisible', 'fixed', 'opacity-0');
          projectsJava.classList.add('opacity-100', 'relative');
        }
      });
    }
  });
</script>

<div class="flex items-center gap-x-4 mb-10">
  <h2 class="text-white/80 text-3xl font-semibold ml-2 md:ml-0">
    CFGS Desarrollo de Aplicaciones Multiplataforma
  </h2>
  
  <select id="projectSelect" class="bg-gray-800 text-white p-2 rounded-md mr-2 md:mr-0">
    <option value="2">2DAM</option>
    <option value="java">Java</option>
    <option value="1">1DAM</option>
  </select>
</div>

<!-- Sección de Proyectos 2DAM -->
<div class="pb-20 projects2 relative opacity-100 transition-opacity duration-1000"> <!-- Mostrar inicialmente -->
  <h3 class="text-white/80 mt-5 text-2xl font-semibold flex gap-x-3 items-center justify-center">
    • Proyectos 2DAM
  </h3>
  <Projects2 />
</div>

<!-- Sección de Proyectos Java -->
<div class="pb-20 projectsJava fixed opacity-0 invisible transition-opacity duration-1000"> <!-- Ocultar inicialmente -->
  <h3 class="text-white/80 mt-5 text-2xl font-semibold flex gap-x-3 items-center justify-center">
    • Proyectos Java <Java />
  </h3>
  <ProjectsJava />
</div>

<!-- Sección de Proyectos 1DAM -->
<div class="pb-20 projects1 fixed opacity-0 invisible transition-opacity duration-1000"> <!-- Ocultar inicialmente -->
  <h3 class="text-white/80 text-2xl font-semibold flex gap-x-3 items-center justify-center">
    • Proyectos 1DAM
  </h3>  
  <Projects1 />
</div>
